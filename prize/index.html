<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

    </style>

</head>
<script src="jquery.js"></script>
<body>
</body>
<script>
    var canvas = document.createElement("canvas");
    var cas = canvas.getContext("2d");
    canvas.width=360;
    canvas.height=360;
    document.body.appendChild(canvas);
    canvas.style.backgroundImage = 'url(http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%9B%BE%E7%89%87&hs=0&pn=5&spn=0&di=46067147280&pi=0&rn=1&tn=baiduimagedetail&is=0%2C0&ie=utf-8&oe=utf-8&cl=2&lm=-1&cs=3144465310%2C4114570573&os=503249983%2C4182093694&simid=4193121428%2C727776595&adpicid=0&lpn=0&ln=30&fr=ala&fm=&sme=&cg=&bdtype=0&oriquery=&objurl=http%3A%2F%2Fimg3.redocn.com%2Ftupian%2F20150430%2Fmantenghuawenmodianshiliangbeijing_3924704.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Ff7vwt_z%26e3B6j15vg_z%26e3Bv54AzdH3Ffitstwg2p7AzdH3Fnld90a9_z%26e3Bip4s&gsm=0)';
    cas.fillStyle = 'rgb(211,211,211)';
    cas.fillRect(0, 0, 360, 360);
    cas.globalCompositeOperation = 'destination-out';
    console.log(cas.getImageData(0,0,100,100).data);
    var arrX = [], arrY = [];


    $('canvas').on('mousedown', function () {
        $(this).on('mousemove', function (e) {
            var x = e.clientX,
                y=e.clientY;
            arrX.push(x);
            arrY.push(y);
            cas.beginPath();
            cas.arc(x, y, 20, 0, 2 * Math.PI);
            cas.fill();




//            if (Math.max.apply(null,arrX)-Math.min.apply(null,arrX)>canvas.width/4*3 && Math.max.apply(null,arrY)-Math.min.apply(null,arrY)>canvas.height/4*3) {
//                console.log(222222222);
//
//            }
        });
        var j = 0;
        var arr=cas.getImageData(0,0,canvas.width, canvas.height).data
        for(var i=0;i<arr.length;i+=4){
            if (arr[i]!=211) {
                j++;
            }
        }
        console.log(j);
        if (j>arr.length/4*0.5) {
            cas.clearRect(0, 0, canvas.width, canvas.height);
        }

    });
    $('canvas').on('mouseup mouseout', function () {
        $('canvas').off('mousemove');
    });


    

</script>
</html>
